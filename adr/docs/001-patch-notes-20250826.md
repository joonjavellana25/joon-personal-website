---
title: "Patch Notes - 2025-08-26"
date: "2025-08-26"
---
I'll search the codebase for the `loadArticle()` function and then open the relevant file to inspect the error handling around the `?id=` param. This will help confirm why `?id=1` doesn't show "This post has been removed or failed to load."

I'll open the two files where `loadArticle()` is defined or referenced to inspect how the `?id=` handling and error states are implemented: [js/articles.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:0:0-0:0) and [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0). This will let me pinpoint why `?id=1` isn't showing the "This post has been removed or failed to load." message.

I'll update [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) to improve [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:45:8-67:9) error handling:
- Validate the `id` query parameter.
- Check `response.ok` and handle 404/empty content.
- Display the exact message: "This post has been removed or failed to load." when appropriate.

Applying the change now.

# Findings
- [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:45:8-89:9) in [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) previously:
  - Didn’t validate `id` query param.
  - Didn’t check `response.ok`.
  - Showed a generic error on catch, not your required message.

# Fix Implemented
I updated [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) in the inline `<script>`:

- Validates `id` and blocks invalid/missing values.
- Checks `response.ok` and treats non-200 as failure.
- Guards against empty markdown content.
- Centralizes the exact fallback message.

Key changes in [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:45:8-89:9):
- Added [showRemovedMsg()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:51:12-53:14) to display: "This post has been removed or failed to load."
- Early return if `id` missing or contains unsafe chars.
- Use `fetch(mdPath).then(response => { if (!response.ok) throw ... })`.
- Treat empty files as failure and show the same message.

Now, visiting `/articles/post.html?id=1` (no `1.md` exists) will show your expected message.

# File(s) Updated
- [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) — improved error handling in [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:45:8-89:9).

# Next Steps
- Test: open `/articles/post.html?id=1` and confirm the message appears.
- If you have numeric IDs mapped to slugs, we can add a lookup table to resolve `id` to filename before fetch.

# Summary
Improved [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:45:8-89:9) to robustly handle invalid/missing IDs, 404s, and empty content, and to display the exact message: "This post has been removed or failed to load."

I'll open `data/articles.json` to see what metadata is available (title, description, image) so we can update meta tags dynamically for each post.

I'll update [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) to:
- Add SEO meta tags placeholders in the `<head>`.
- Dynamically set title, description, URLs, and social tags based on [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) matching the `?id=`.
- Fallback to a default image and generic text on errors.

Proceeding to modify the file.

# Done: Dynamic SEO per post

I updated [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) to dynamically set SEO/meta tags based on the current post.

- In `<head>` I added placeholder tags for Open Graph, Twitter, and canonical.
- In [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:57:8-150:9):
  - Fetches [/data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) to find the matching entry by `?id=...`.
  - Sets `document.title`, `og:title`, `og:description`, `og:url`, `og:image`, `twitter:*`, and `link[rel="canonical"]` to match the post.
  - Falls back to safe defaults and updates meta on error as well.

Key pieces:
- File: [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0)
- Function: [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:57:8-150:9)
- Helper: [updateMeta({ title, description, image })](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:67:12-99:14) inside the script
- Data source: [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0)

Notes:
- `image` is optional; since [articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) doesn’t include one, we default to `/assets/img/001-mac.jpeg`. If you want per-post images, add `"image": "/path/to.jpg"` per item and I’ll wire it in.
- This is client-side. Some crawlers don’t execute JS. If SEO for those bots is critical, consider prerendering (e.g., Netlify prerender) or SSR.

# Quick test
- Open `/articles/post.html?id=getting-started`.
- View page source or use devtools to confirm meta tags reflect the post title/description and current URL.

Want me to add an `image` field to [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) and wire it up?

To support dynamic SEO images per post, I'll:
1) Add an "image" field to each entry in [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) using available images under `assets/img/`.
2) Update [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) to use the image from the JSON when present for meta tags.

I'll first list the images in `assets/img/` to pick appropriate defaults. Then I'll update the JSON and script.

I'll add an "image" field to each entry in [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) using images under `assets/img/`, then update [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) to include that image in the dynamic meta tags.

I'll update [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) to include the per-post image from [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) when setting dynamic meta tags. This ensures `og:image` and `twitter:image` reflect each post.

# Dynamic SEO: Per-post images added

I updated:
- [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0): added an `image` field for each post pointing to assets in `assets/img/`.
- [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0): when the article loads, it fetches [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0), finds the matching `id`, and now passes `title`, `description`, and `image` into [updateMeta()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:67:12-99:14). This updates:
  - `document.title`
  - `og:title`, `og:description`, `og:url`, `og:image`
  - `twitter:title`, `twitter:description`, `twitter:url`, `twitter:image`
  - `link[rel="canonical"]`

If a post doesn’t have an `image`, it falls back to [/assets/img/001-mac.jpeg](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/assets/img/001-mac.jpeg:0:0-0:0).

Notes:
- This is client-side; some crawlers won’t execute JS. If you need SEO for non-JS bots, consider prerendering or SSR.
- There’s another meta updater in [js/articles.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:0:0-0:0) ([updateMetaTags()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:108:0-128:1)) for a different article flow. The [post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) script handles meta on this page; they won’t conflict unless both run on the same route.

# How to test
- Open `/articles/post.html?id=getting-started` (and others).
- Check DevTools Elements for updated meta tags and title.
- For share previews, use social debuggers (FB Sharing Debugger, Twitter Card Validator).

# Summary
Per-post dynamic SEO is implemented, including image support from [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0). Let me know if you want different images per article or additional meta (e.g., `article:published_time`, `og:site_name`).

I'll quickly open `server.js` to see if there's a Node server we can leverage for server-side rendering or prerendering support, which affects SEO for bots that don't run JS.

Short answer: Yes, this works with plain HTML + vanilla JS (no frameworks). But there’s an important caveat for SEO/social sharing.

# What works natively
- The dynamic updates in [articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) (using [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:57:8-151:9) + [updateMeta()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:67:12-99:14)) are pure vanilla JS using `fetch` and `marked`. No Vue/React/etc. needed.
- Users see the correct title/meta after JS runs.

# The SEO caveat
- Many crawlers don’t execute JS. Social scrapers (Facebook/Twitter/LinkedIn) generally read the raw HTML only. They won’t see meta tags set by JS.
- Googlebot can render JS, but it can be delayed and isn’t guaranteed for fast indexing or perfect rendering.

So: for reliable SEO/snippets and social link previews, the tags must be present in the initial HTML response (server-rendered or prerendered).

# Practical options (framework-free)
- Pre-generate static pages per post (best for Netlify and social sharing)
  - Build step script reads [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) + markdown and outputs `/articles/<id>.html` with hard-coded `<meta>` for each.
  - Update links to point to `/articles/<id>.html` instead of `/articles/post.html?id=<id>`.
  - 100% vanilla, no framework. Bots get correct meta.

- Simple SSR via your [server.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/server.js:0:0-0:0)
  - Intercept `/articles/post.html?id=...`, read a template, inject meta and body server-side, and return HTML.
  - Still plain Node (no framework). Bots and scrapers get correct tags.
  - If deploying to Netlify, this would require a server runtime or converting to a serverless function.

- Netlify prerendering
  - Enable prerendering so Netlify serves crawler-friendly HTML snapshots.
  - Minimal code change, but relies on Netlify’s service.

# Recommendation
- If you care about social previews: pre-generate static per-post pages.
- If you want zero build step changes: enable Netlify prerendering.
- If you want to keep a Node server: I can modify [server.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/server.js:0:0-0:0) to SSR `post.html?id=...`.

Want me to implement one of these now? I recommend the static generation route: a small Node script to emit `/articles/<id>.html` files using your existing [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) and markdown.

---
How ? Is it possible to change /articles/post.html?id= to /articles/{id}.html ?
---

I'll check `netlify.toml` to see current redirects/settings. If appropriate, I'll add a pretty-URL rewrite so /articles/:id maps to /articles/post.html?id=:id without frameworks. This is the quickest path to /articles/{id}.html.

I'll add Netlify redirect rules to support pretty URLs and update links to point to /articles/{id}.html. This will map pretty URLs to your existing post page without frameworks. Then I'll adjust generated meta URLs to include the .html path.

I'll update [js/articles.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:0:0-0:0) so all article links use the new pretty URLs `/articles/{id}.html`. This ensures users and crawlers see the clean paths.

I'll update [js/articles.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:0:0-0:0) to support pretty URLs properly by:
- Parsing the ID from `/articles/{id}.html` by stripping the [.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0) extension.
- Updating [updateMetaTags()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:108:0-128:1) URLs to include [.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0).

This ensures article lookup and SEO URLs work with the new route style.

Yes. You can keep one template ([articles/post.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0)) and serve pretty URLs like `/articles/{id}.html` without frameworks by using URL rewrites and a tiny JS tweak. I’ve implemented this.

# What I changed
- netlify.toml
  - Added redirects to map pretty URLs to your template with the id query:
    - `/articles/:id.html` → `/articles/post.html?id=:id`
    - `/articles/:id` → `/articles/post.html?id=:id`
  - File: [netlify.toml](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/netlify.toml:0:0-0:0)

- js/articles.js
  - Updated links on the listing to use `/articles/{id}.html`.
  - Updated the single-article loader to parse the id from `{id}.html` and fixed SEO canonical/URL to include [.html](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:0:0-0:0).
  - File: [js/articles.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:0:0-0:0) ([loadArticles()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:24:0-108:1) and [updateMetaTags()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/js/articles.js:108:0-128:1))

- articles/post.html
  - Already loads by `?id=`. With the Netlify rewrite, `/articles/{id}.html` gets translated to `post.html?id={id}` so your existing [loadArticle()](cci:1://file:///Users/jonjavellana25/CascadeProjects/personal-website/articles/post.html:57:8-151:9) continues to work.
  - Also dynamically sets SEO meta from [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) (title/description/image), which we added.

# How it works
- Users and crawlers visit `/articles/{id}.html`.
- Netlify rewrites to `/articles/post.html?id={id}` (status 200, no visible redirect).
- The page loads content for that id and updates meta tags client-side.

# Caveats
- Local dev: your [netlify.toml](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/netlify.toml:0:0-0:0) dev command uses `python -m http.server` which won’t honor Netlify redirects. To test locally:
  - Use Netlify CLI (netlify dev) or
  - Run your Node server ([server.js](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/server.js:0:0-0:0)) and add a simple rewrite there, or
  - Test after deploying to Netlify.

- SEO crawlers that don’t execute JS still won’t see dynamic meta. For perfect social previews/SEO, consider:
  - Pre-generating static `/articles/{id}.html` files at build time, or
  - Enabling Netlify prerendering.

# Optional follow-ups
- I can add a simple static generator to emit real `/articles/{id}.html` files from your markdown + [data/articles.json](cci:7://file:///Users/jonjavellana25/CascadeProjects/personal-website/data/articles.json:0:0-0:0) so meta is present on first HTML response.
- Update `sitemap.xml` to include `/articles/{id}.html` URLs.

